{"version":3,"file":"index.esm.js","sources":["../src/runtime.ts","../src/hooks.ts","../src/components.tsx"],"sourcesContent":[null,null,null],"names":["isLibrarySoundName","name","manifest","sounds","cdnBaseUrl","soundEnabledGlobal","soundStateListeners","audioUnlockInitialized","setCDNUrl","url","getCDNUrl","soundBlobCache","howlInstanceCache","makeRemoteSound","async","fetchSoundBlob","blob","objectUrl","URL","createObjectURL","howl","Howl","src","format","html5","onload","_objectUrl","instance","subscriptions","createOrGetHowlInstance","claimSound","entry","freeSound","playing","revokeObjectURL","unload","cleanupUnusedSound","localPath","publicPath","controller","AbortController","timeoutId","setTimeout","abort","response","fetch","method","signal","clearTimeout","ok","_a","headers","get","toLowerCase","startsWith","e","getLocalSoundPath","error","console","warn","Error","soundInfo","soundUrl","preloadSounds","names","Promise","all","map","playSound","options","isSoundEnabled","sound","freed","undefined","volume","rate","loop","on","play","window","setSoundEnabled","enabled","localStorage","setItem","forEach","listener","unlockAudioContext","Howler","ctx","state","resume","SoundContext","useSound","soundName","defaultOptions","isLoaded","setIsLoaded","useState","isPlaying","setIsPlaying","soundRef","useRef","activeSoundsRef","soundContext","useContext","ensureLoaded","useCallback","current","id","soundIndex","findIndex","resolver","splice","length","push","resolve","stop","pause","then","useEffect","useSoundOnChange","value","initialRef","skipThisInitialRun","initial","catch","err","useSoundEnabled","context","setEnabled","Sound","trigger","children","onLoad","onPlay","onStop","onError","React","createElement","Fragment","SoundButton","soundOptions","onClick","onSoundError","props","savedPreference","getItem","initSoundEnabledState","events","handleInteraction","event","document","removeEventListener","addEventListener","initAudioContextUnlock","createContext","SoundProvider","preload","initialEnabled","setEnabledState","newEnabled","callback","index","indexOf","Provider"],"mappings":"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"}